[package]
name = "nanosat"
version = "0.1.0"
authors = ["Lechev.space <dev@lechev.space>, Lachezar Lechev <elpiel93@gmail.com>"]
edition = "2021"
license = "MIT OR Apache-2.0"

default-run = "nanosat"
default = ["embassy-time-systick"]

[features]
# "feature `embassy-time-systick` includes `esp32c3-hal:embassy-time-systick` which is neither a dependency nor another feature"
default = ["embassy-time-systick"]
std = []
embassy-time-systick = ["hal/embassy-time-systick", "embassy-time/tick-hz-16_000_000"]
# embassy-time-timg0 = ["hal/embassy-time-timg0", "esp32c3-hal:embassy-time-timg0", "embassy-time/tick-hz-1_000_000"]

# embassy-time-systick = ["hal/embassy-time-systick", "embassy-time/tick-hz-16_000_000"]
# embassy-time-timg0 = ["hal/embassy-time-timg0", "embassy-time/tick-hz-1_000_000"]
# embassy-time-systick = ["embassy-time/tick-hz-16_000_000"]
# embassy-time-timg0 = ["embassy-time/tick-hz-1_000_000"]

[dependencies]
# Base crates
hal = { version = "0.7", package = "esp32c3-hal", features = ["rt", "embassy", "eh1", "vectored", "async", "embassy-time-systick"], git = "https://github.com/esp-rs/esp-hal.git", rev = "2eeb3db" }
esp-backtrace = { version = "0.6", features = ["esp32c3", "panic-handler", "print-uart"] }
esp-println = { version = "0.4", features = ["esp32c3"] }

# Allocator
esp-alloc = { version = "0.2.0", features = ["oom-handler"] }

# Embassy
embassy-executor  = { git = "https://github.com/embassy-rs/embassy", rev = "f9c0c53", features = ["nightly", "integrated-timers"] }
embassy-sync       = { git = "https://github.com/embassy-rs/embassy", rev = "f9c0c53", features = ["nightly", "defmt"]}
embassy-time       = { git = "https://github.com/embassy-rs/embassy", rev = "f9c0c53", features = ["nightly"] }
embassy-futures = { version = "0.1.0", git = "https://github.com/embassy-rs/embassy", rev = "f9c0c53", features = ["defmt"] }

embedded-hal       = { version = "0.2.7", features = ["unproven"] }
embedded-hal-1     = { version = "=1.0.0-alpha.9", package = "embedded-hal" }
embedded-hal-async = { version = "0.1.0-alpha.3" }
embedded-hal-nb    = { version = "=1.0.0-alpha.1" }
embedded-can       = { version = "0.4.1" }

static_cell = "1.0"
once_cell = { version = "1.0", default-features = false, features = ["critical-section"] }
max170xx = "0.1.0"
fugit = { version = "0.3", features = ["defmt"] }
# defmt = "0.3.2"
# defmt-rtt = "0.4.0"

[patch.crates-io]

# hal = { package = "esp32c3-hal", git = "https://github.com/esp-rs/esp-hal", rev = "2eeb3db" }

